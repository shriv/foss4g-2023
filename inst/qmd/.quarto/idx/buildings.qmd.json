{"title":"Buildings","markdown":{"headingText":"Buildings","containsRefs":false,"markdown":"\nWhile the neighbourhood I grew up in was a tumultuous jumble of urban form, the enclaves of \"old Bombay\" are worlds apart. The ornate buildings in the tree-lined neighbourhoods of South Bombay areas like Colaba or, Parsi Colony in Dadar are like an elegant elderly lady, sagging and covered in liver-spots, but her charm and beauty still take your breath away. \n\n::: {layout-ncol=2}\n\n![Parsi colony.](./assets/parsi-colony.jpeg)\n\n![Badhwar Park.](./assets/badhwar-park.jpeg)\n:::\n\nLike any city in India (and perhaps more so), Mumbai is a city of contradictions and contrast. The razzle dazzle of Bollywood make it the city of dreams but the vast droves of rural migrant workers living in slums also make it the city of inequality. \n\n> India loves to contradict itself on everything and anything. [...] Every stereotype you know of India is completely true. At the same time the stereotypes are being broken all the time. \n> Love is forbidden but romance is blossoming. India is poor, but it is a land of luxury. It has blazing hot summers and snows in the winter. It has the most barren deserts and the lushest jungles...\n\n- _Peter Claridge_ from the Chennai Expat Guide @claridgeChennaiExpatGuide2018\n\nDespite a substantial slum population (last calculated ~42% in 2011 @MumbaiGreaterMumbai2011), the ingenuity of the people living in these areas exceeds imagination. Facilitated by the cheek-by-jowl proximity of labour and business, slums are economic powerhouses where no task is too small. For example, the recycling of hair waste to wigs and hair extensions is a multi-million dollar industry that employs a vast segment of entrepreneurial individuals and businesses from ragpickers (collecting discarded hair from the streets) to local waste collection depots and wig artisans @doronWasteNationGarbage2018. \n\n::: {layout-ncol=2}\n![Shivaji Nagar.](./assets/shivaji-nagar.jpeg)\n\n![Mankhurd.](./assets/mankhurd.jpeg)\n:::\n\n\n## Buildings anchor the city\nBuildings anchor urban form and their spread and style also dictate the aesthetics. This is even more the case for urban areas with a large number of informal dwellings (independent or as part of a slum cluster). Within slums, buildings dictate movement more than street networks via narrow alleys (“gullies” in Mumbai parlance) rather than formally managed and designed streets. \n\n## Getting building data\nThe R package `osmdata` can be used to query for building polygons in a small area. A helper function is used to simplify the generation of a bounding box around a central point. The quality of OSM in New Zealand is very high since LINZ manages regular uploads through their process of deriving outlines from satellite imagery. \n\n```{r}\n# load packages\nlibrary(dplyr)\nlibrary(sf)\nlibrary(osmdata)\nlibrary(osmplotr)\nsource(\"../../R/centroid_bbox.R\")\n\nakl_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = -36.85494696219434, \"lng\" = 174.76040843528585),\n  distance = 1000,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\nakl_bldgs_osm <- opq(akl_bbox) %>%\n  add_osm_feature(\"building\") %>% \n  osmdata_sf()\n\nakl_bldgs_osm_poly <- bind_rows(\n  akl_bldgs_osm$osm_polygons,\n  akl_bldgs_osm$osm_multipolygons\n) %>% \n  st_make_valid()\n```\n\n\n```{r}\n#| echo: true\n#| label: fig-interactive-bldgs\n#| fig-cap: Interactive map of buildings in Central Auckland. OSM attributes associated with buildings can be accessed by hovering and clicking on a given building polygon though most attributes are generally not filled in. \n \n# load plotting library\nlibrary(tmap)\ntmap_options(check.and.fix = TRUE)\n\n# plot cafe locations on interactive map\ntmap_mode(\"view\")\ntm_shape(akl_bldgs_osm_poly) + \n  tm_polygons()\n```\n\nQuerying building data for a large area from OSM is not performant. For larger scale analyses, [LINZ has building outlines](https://data.linz.govt.nz/layer/101290-nz-building-outlines/) available to download for the whole country or for a cropped section. \n\n```{r}\n#| echo: true\n#| warning: false\n#| output: false\n\n# load packages\nlibrary(dplyr)\nlibrary(sf)\n\n# get buildings from LINZ export\n# https://data.linz.govt.nz/layer/101290-nz-building-outlines/\nakl_bldgs <- st_read(\"../extdata/lds-nz-building-outlines-SHP/\")\n```\n\n```{r}\n#| echo: true\n#| label: fig-interactive-cafes\n#| out-width: 100%\n#| fig-cap: Static map of buildings around Auckland Harbour. \n \n# load plotting library\nlibrary(tmap)\n\n# plot buildings around Auckland Harbour\ntmap_mode(\"plot\")\ntm_shape(akl_bldgs) + \n  tm_polygons()\n```\n\nBuilding data quality and availability is an issue for analyses of developing nations - where the lower resources and capacity of local municipalities cannot keep up with the pace of informal development. Building shapes derived from satellite imagery help to address this issue (somewhat). Both [Google](https://sites.research.google/open-buildings/) and [Microsoft](https://github.com/microsoft/GlobalMLBuildingFootprints) provide global coverage of building footprints. The projects are in their nascence but it's likely that they will only get better over time. \n\n\n![](./assets/global-ml-osm.png)\nThe highest quality building available currently is the EUCUCCO dataset @milojevic-dupontEUBUCCOV0European2023. This dataset allows for detaileed analysis of urban form as it includes attributes like building type (use), height and date of construction. \n\n![Some of the building attributes available in EUBUCCO. Example of Paris reproduced from @milojevic-dupontEUBUCCOV0European2023.](./assets/eubucco.png)\n\n\n## Figure-ground diagrams and urban form\nFigure-ground diagrams highlight built and unbuilt space. Only buildings are included in the conventional version resulting in a stark mosaic of black and white that allows for a bird’s eye analysis of urban form and structures. However, adding streets with a tentative width corresponding to its classification (decreasing width in order: primary, secondary, tertiary, residential), can offer more insights about the urban tissue. \n\nSquare mile comparisons of different urban areas (or the same area across time) feature extensively in the book Great Streets by Allan Jacobs [@morphocodeFiguregroundDiagram2019] according to [@boeingUrbanFormFigureGround2017]. Given the highly heterogeneous urban mosaic of megacities like Mumbai, smaller areas are more meaningful as they represent a consistently designed space. For this reason, the figure-ground diagrams in @fig-figure-ground have a 500m bounding box around a central coordinate.\n\nThe famous rectangular blocks of New York City (NYC) are a stark contrast to the more sinuous blocks of British (local and colonial) urbanism. Secondary or tertiary roads surround all blocks in NYC while blocks in Islington and Dadar Parsi Colony, two residential neighbourhoods of British design, are connected by residential roads with arterial connections much further away.\n\n```{r}\n#| include: false\nlibrary(osmdata)\nlibrary(sf)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(patchwork)\nlibrary(osmplotr)\nlibrary(ggsn)\nsource(\"../../R/centroid_bbox.R\")\nsource(\"../../R/return_poche_map.R\")\n```\n\n\n```{r}\n#| output: false\n# bounding boxes and extend with spacey function\npc_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 19.01879, \"lng\" = 72.85141),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\nbe_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 18.93566, \"lng\" = 72.8401),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\nnyc_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 40.7921, \"lng\" = -73.9718),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\nldn_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 51.53827, \"lng\" = -0.09772),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\n```\n\n\n```{r}\n#| output: false\n# return individual plot objects\np1 <- return_poche_map(pc_bbox, \"Parsi Colony, Dadar\", bldg_colour = \"black\", map_bg = \"white\")\np2 <- return_poche_map(be_bbox, \"Ballard Estate, Fort\", bldg_colour = \"black\", map_bg = \"white\")\np3 <- return_poche_map(nyc_bbox, \"Upper West Side, NYC\", bldg_colour = \"black\", map_bg = \"white\")\np4 <- return_poche_map(ldn_bbox, \"Islington, London\", bldg_colour = \"black\", map_bg = \"white\")\n```\n\n```{r}\n#| out.width: 100%\n#| label: fig-figure-ground\n#| fig-cap: Modified figure-ground diagrams (with street widths) for neighbourhoods in Mumbai, London and New York City. \n\n# Compose plot\n((p1 + theme(plot.margin = unit(c(0,10,10,0), \"pt\"))) +\n  (p2  + theme(plot.margin = unit(c(0,10,10,0), \"pt\")))) / \n  ((p3  + theme(plot.margin = unit(c(0,10,0,0), \"pt\"))) + \n   (p4))\n```\n\n## Learning resources\n- [Getting building footprints from GlobalML](https://shriv.github.io/e-flaneur/posts/global-ml/)\n- [History of figure-ground diagrams](https://morphocode.com/figure-ground-diagram/)\n- [Building figure-ground diagrams with `osmplotr` in R](https://shriv.github.io/e-flaneur/posts/osmplotr/)\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"self-contained":true,"number-sections":true,"output-file":"buildings.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"csl":"ieee.csl","editor":"visual","theme":"cosmo","tbl-cap-location":"top"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}